<div ng-controller="HomeController">
  <%= image_tag 'logo.png', style: 'margin: 10px' %>

  <div class="row">
    <div class="col-md-12">
      <div id="googleMap" style="width: 100%; height: 100px"></div>
    </div>

    <div id="timeline">
      <div class="col-md-12">
      </div>

      <div class="col-md-12">
        <span ng-repeat="event in eventsToRender()" style="float: left; padding-top: 10px; padding-left: 10px;">
          <img ng-src="http://maps.googleapis.com/maps/api/streetview?size=240x240&location={{ event.lat }},{{ event.lon }}&heading={{ event.heading }}&sensor=false&key=AIzaSyDMbu8xOPNiwE7o12PXfN3Ah6VqN6qNsQ4" height="120" width="120">
          <div style="width: 120px; text-align: center">
            {{ event.parsedTimestamp | date:'HH:mm' }}
          </div>
        </span>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  var data = <%== @data.to_json %>;
  google.maps.event.addDomListener(window, 'load', function() { renderMap() });
</script>